{#<!DOCTYPE html>#}
<html lang="en">
{% load static %}

<head>



    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">



  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Index - OnePage Bootstrap Template</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="../static/admin/assets/img/favicon.png" rel="icon">
  <link href="../static/admin/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../static/admin/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../static/admin/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../static/admin/assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../static/admin/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../static/admin/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="../static/admin/assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: OnePage
  * Template URL: https://bootstrapmade.com/onepage-multipurpose-bootstrap-template/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- alert box- remove -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>



    <!-- card css -->
    <style>

        .modal {
    z-index: 1050; /* Ensure the modal is above everything else */
}

.modal-backdrop {
    z-index: 1040; /* Ensure the backdrop is below the modal */
}
body.modal-open {
    overflow: hidden;
}

.modal-open .modal {
    position: fixed;
}

        .modal-content {
    background-color: #f8f9fa;
    border-radius: 10px;
    padding: 20px;
}

.modal-header {
    border-bottom: none;
}

.modal-footer {
    border-top: none;
}





        #navmenu ul.navbar-nav {
    gap: 10px; /* Adjusts space between the links */
}

.navmenu .nav-item .nav-link {
    padding: 10px 15px; /* Adds padding around each link */
    text-decoration: none; /* Removes underline from links */
}

.navmenu .nav-item .nav-link:hover {
    color: #ffffff; /* Change link color on hover */
}




/* Card Styling */
.card {
    width: 100%; /* Full width inside its column */
    max-width: 340px; /* Increased max-width for a larger card */
    margin: auto; /* Center the card */
    border: none;
    border-radius: 12px;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    background: #f4f4f9; /* Subtle off-white background */
}

/* Hover effect */
.card:hover {
    transform: translateY(-10px);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.15);
}

.card-body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 20px;
    background-color: #ffffff; /* Clean white background */
}

.card-title {
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    color: #333; /* Darker font color */
}

.card-text {
    margin-bottom: 0.75rem;
    font-size: 1rem;
    color: #666; /* Subtle text color */
}

/* Button Styling */
.custom-btn-warning, .custom-btn-danger, .custom-btn-primary {
    padding: 10px 15px;
    font-size: 0.9rem;
    border-radius: 8px;
    transition: background-color 0.3s ease, transform 0.3s ease;
}

.custom-btn-warning {
    background-color: #f0ad4e;
    color: #fff;
    border: none;
}

.custom-btn-danger {
    background-color: #d9534f;
    color: #fff;
    border: none;
}

.custom-btn-primary {
    background-color: #5bc0de;
    color: #fff;
    border: none;
}

/* Hover effects for buttons */
.custom-btn-warning:hover, .custom-btn-danger:hover, .custom-btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.custom-btn-warning:hover {
    background-color: #ec971f;
}

.custom-btn-danger:hover {
    background-color: #c9302c;
}

.custom-btn-primary:hover {
    background-color: #31b0d5;
}

/* Adjust spacing between cards */
.card + .card {
    margin-top: 25px;
}
/* Image hover styling */
.img-fluid {
    transition: box-shadow 0.3s ease, opacity 0.3s ease; /* Smooth transition for hover effect */
}

.card:hover .img-fluid {
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Adds a shadow on hover */
    opacity: 0.9; /* Slightly dim the image on hover */
}



/*card design end */


    .btn {
        font-size: 0.875rem; /* Adjust button font size */
        padding: 0.5rem 1rem; /* Adjust button padding */
        border-radius: 5px;
    }

    .btn-warning {
        background-color: #ffc107;
        border-color: #ffc107;
    }

    .btn-warning:hover {
        background-color: #e0a800;
        border-color: #d39e00;
    }

    .btn-danger {
        background-color: #dc3545;
        border-color: #dc3545;
    }

    .btn-danger:hover {
        background-color: #c82333;
        border-color: #bd2130;
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
    }

    .btn-primary:hover {
        background-color: #0069d9;
        border-color: #0062cc;
    }

    .d-flex {
        display: flex;
    }

    .justify-content-center {
        justify-content: center;
    }

    .gap-2 {
        gap: 0.5rem;
    }

    .text-center {
        text-align: center;
    }

    .mt-3 {
        margin-top: 1rem;

    }

        {#        logo#}

        .logo-right {
  width: 150px;
  height: auto;
  margin-left: 10px; /* Adjust the value as needed */
}


        /* Styling the form elements */
.input-group .form-control:focus {
    box-shadow: none;
    border-color: #17a2b8;
}

.form-select {
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
}

.form-select:focus {
    box-shadow: none;
    border-color: #17a2b8;
}

/* Hover effect for the search button */
.btn-info:hover {
    background-color: #138496;
    border-color: #138496;
    transform: translateY(-2px);
    transition: all 0.2s ease-in-out;
}

/* Search button interaction effect */
.btn-info:focus {
    box-shadow: none;
}

         /*see more */
        .hidden-row {
            display: none;
        }

                /*css for search icon */
         /* Adjust the icon positioning */
    .search-icon {
        position: relative;
        top: 2px; /* Adjust this value to lower the icon */
    }

    /* Optional: Ensure the button doesn't look like a traditional button */
    .input-group-text {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px 15px; /* Adjust padding as needed */
    }

    /* Optional: Styling for the button border */
    .input-group-text.border-0 {
        border: none;
        background: transparent;
    }

</style>

</head>

<body class="index-page">

<header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

        <!-- Logo -->
        <a href="/userhome" class="logo d-flex align-items-center" style="margin-left: -100px;">
            <img src="../static/admin/assets/img/logo1.png" alt="BookHive Logo" width="150px" height="auto">
        </a>

        <!-- Navigation Menu -->
        <nav id="navmenu" class="navmenu" style="margin-right: -100px;">
            <ul class="navbar-nav d-flex flex-row align-items-center"> <!-- Flex-row for horizontal layout -->
                <li class="nav-item">
                    <a href="addbook" class="nav-link">Add a Book</a>
                </li>
{#                <li class="nav-item">#}
{#                    <a href="#about" class="nav-link">Categories</a>#}
{#                </li>#}
                <li class="nav-item">
                    <a href="/fav_view" class="nav-link">Favorites</a>
                </li>
                <li class="nav-item">
                    <a href="userhome" class="nav-link">Buy</a>
                </li>
                <li class="nav-item">
                    <a href="/home_chat" class="nav-link">Chats</a>
                </li>
                <li class="nav-item">
    <a href="/seller_request_view" class="nav-link">Requests {{ request.session.ps }}</a>
</li>

                <li class="nav-item">
                    <a href="/profile" class="nav-link">Profile</a>
                </li>
            </ul>
        </nav>

        <!-- Mobile Menu Toggle Icon -->
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
    </div>
</header>



  <main class="main">


          <div class="form-container">
   <br/><br/><br/>
<form id="form1" name="form1" method="post" action="sellerSearch">
    {% csrf_token %}
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="input-group">
                <!-- Filter Dropdown with Icon (Commented Out for Now) -->
                <div class="input-group-prepend">

                    <select name="cat" class="form-select form-select-lg" aria-label="Category Select">
                        <option value="0">All</option>
                        {% for i in c %}
                            <option value="{{ i.id }}" {% if i.id == cat %} selected {% endif %}>{{ i.category }}</option>
                        {% endfor %}
                    </select>

                </div>

                <!-- Search Input -->
                <input type="text" id="name-search" name="s" value="{{ s }}" class="form-control form-control-lg" placeholder="Enter name to search" aria-label="Search">

                <!-- Search Icon as a Button -->
                <div class="input-group-append">
                    <button type="submit" class="input-group-text border-0" id="search-addon">
                        <i class="fas fa-search search-icon"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>

</div>


             </div>

   <!-- Hero Section -->
<section id="hero" class="hero section">

  <img src="../static/admin/assets/img/hero-bg-abstract.jpg" alt="" data-aos="fade-in" class="" style="border-radius: 50%">

  <div class="container">


   {% if not s and not cat %}
<div class="row justify-content-center" data-aos="zoom-out">
    <div class="col-xl-7 col-lg-9 text-center" style="margin-bottom: 2rem;">
        <!-- Add a Heading -->
        <h1 class="display-4">Manage Your Book Listings</h1>
        <p class="lead">Welcome to your Seller Dashboard. Here you can manage your book inventory, update listings, and keep track of your sales. Effortlessly connect with buyers and enhance your selling experience with BookHive.</p>
    </div>
</div>
{% endif %}

{#    <div class="text-center" data-aos="zoom-out" data-aos-delay="100">#}
{#      <!-- Placeholder for additional button if needed -->#}
{#    </div>#}
  <!-- Results Message -->
{% if s or cat %}
    <div class="text-center mt-0">
        {% if val %}
            <h5 class="result-header fw-bold text-success">Search Results:</h5>
        {% else %}
            <h5 class="no-results fw-bold text-danger">No search results found.</h5>
        {% endif %}
    </div>
{% endif %}


<div class="row gy-4 mt-5">
    <!-- Book Cards -->
    {% for i in val %}
    <div class="col-md-6 col-lg-4" data-aos="zoom-out" data-aos-delay="100">
        <div class="card h-100">
            <!-- Image Section -->
            <div class="text-center">
                <img src="{{ i.photo.url }}" alt="{{ i.Tittle }}" class="img-fluid rounded-top" style="object-fit: cover; height: 200px;">

            </div>

            <!-- Card Body -->
            <div class="card-body text-center">
                <!-- Book Title -->
                <h5 class="card-title">{{ i.Tittle }}</h5>
                <!-- Author -->
                <p class="card-text"><strong>Author:</strong> {{ i.Author }}</p>
                <!-- Genre -->
                <p class="card-text"><strong>Category:</strong> {{ i.category.category }}</p>
                <!-- Status -->
                <p class="card-text"><strong>Status of book:</strong> {{ i.status }}</p>
                <!-- Action Buttons -->
                <div class="d-flex justify-content-center gap-2 mt-3">
                    <a href="/UpdateBook/{{ i.id }}" class="btn btn-warning btn-sm custom-btn-warning">Update</a>
                    <!-- Remove Button -->
                    <a href="#" data-bs-toggle="modal" data-bs-target="#confirmDeleteModal" data-book-id="{{ i.id }}" class="btn btn-danger btn-sm custom-btn-danger delete-book-btn">
                        Remove
                    </a>
                    <!-- View Details Button -->
                    <a href="/book_detail/{{ i.id }}" class="btn btn-primary btn-sm custom-btn-primary">View Details</a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

  <!-- See More and Show Less Buttons -->
        <div class="text-center mt-4">
            <button id="seeMoreBtn" class="btn btn-primary btn-sm custom-btn-primary" style="display: none;">See More</button>
            <button id="showLessBtn" class="btn btn-primary btn-sm custom-btn-primary" style="display: none;">Show Less</button>
        </div>

</section>


<!-- Add this section somewhere in sellerindex.html -->
<section class="resale-statistics mt-5">
    <div class="container">
        <h2 class="text-center mb-4">Sales Statistics</h2>
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card bg-light shadow-sm p-4">
                    <div class="card-body">
                        <h5 class="card-title">Total Books Sold</h5>
                        <p class="card-text fs-4">{{ total_books_sold }} books</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-light shadow-sm p-4">
                    <div class="card-body">
                        <h5 class="card-title">Total Sales Amount</h5>
                        <p class="card-text fs-4">₹{{ total_sales_amount }}</p>
                    </div>
                </div>
            </div>
        </div>
        {% if most_sold_book %}
        <div class="row justify-content-center mt-4">
            <div class="col-md-6">
                <div class="card bg-light shadow-sm p-4">
                    <div class="card-body">
                        <h5 class="card-title">Most Sold Book</h5>
                        <p class="card-text fs-5"><strong>{{ most_sold_book.BookID__title }}</strong> with <strong>{{ most_sold_book.total_sales }}</strong> sales</p>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</section>






<!-- Bootstrap Modal -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Delete</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to remove this book?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <a href="#" id="deleteConfirmBtn" class="btn btn-danger">Yes, Delete</a>
      </div>
    </div>
  </div>
</div>



  </main>
<footer id="footer" class="footer light-background py-3">

    <div class="container copyright text-center mt-4">
        <p>© <span>2024</span> <strong class="px-1 sitename">BookHive</strong> <span>All Rights Reserved</span></p>
        <div class="credits">
            <!-- You can add custom links or messages here -->
            Designed by <a href="#">Your Team Name</a>
        </div>
    </div>

</footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="../static/admin/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../static/admin/assets/vendor/php-email-form/validate.js"></script>
  <script src="../static/admin/assets/vendor/aos/aos.js"></script>
  <script src="../static/admin/assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="../static/admin/assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="../static/admin/assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="../static/admin/assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="../static/admin/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">


  <!-- Main JS File -->
  <script src="../static/admin/assets/js/main.js"></script>

<script>
  $(document).ready(function() {
    // Handling delete button click to update confirmation link
    $('.delete-book-btn').click(function() {
      var bookId = $(this).data('book-id');
      var deleteUrl = "/DeleteBook/" + bookId;

      // Update the delete confirmation link with the correct URL
      $('#deleteConfirmBtn').attr('href', deleteUrl);
    });

    // Ensure the select box has a nicer interaction by adding a focus event listener
    var selectBox = document.querySelector('select[name="cat"]');
    if (selectBox) {
      selectBox.addEventListener('focus', function() {
        this.style.boxShadow = '0 0 5px rgba(23, 162, 184, 0.5)';
      });

      selectBox.addEventListener('blur', function() {
        this.style.boxShadow = 'none';
      });
    }

    // Variables for See More and Show Less button functionality
    const seeMoreBtn = document.getElementById('seeMoreBtn');
    const showLessBtn = document.getElementById('showLessBtn');
    const hiddenRows = document.querySelectorAll('.hidden-row');
    let currentIndex = 0;

    // Check if buttons and hidden rows exist
    if (seeMoreBtn && showLessBtn && hiddenRows.length > 0) {
      seeMoreBtn.style.display = 'inline-block';

      // See More button functionality
      seeMoreBtn.addEventListener('click', function () {
        for (let i = currentIndex; i < currentIndex + 6 && i < hiddenRows.length; i++) {
          hiddenRows[i].style.display = 'block';
        }
        currentIndex += 6;

        // Hide the See More button if all rows are visible
        if (currentIndex >= hiddenRows.length) {
          seeMoreBtn.style.display = 'none';
        }
        showLessBtn.style.display = 'inline-block';
      });

      // Show Less button functionality
      showLessBtn.addEventListener('click', function () {
        hiddenRows.forEach(function(row) {
          row.style.display = 'none';
        });
        currentIndex = 0;
        showLessBtn.style.display = 'none';
        seeMoreBtn.style.display = 'inline-block';
      });
    }
  });
</script>



</body>

</html>