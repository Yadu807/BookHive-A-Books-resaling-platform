{#<!DOCTYPE html>#}
<html lang="en">
{% load static %}

<head>
    <style>

/* Card Styling */
.card {
    width: 100%; /* Full width inside its column */
    max-width: 340px; /* Increased max-width for a larger card */
    margin: auto; /* Center the card */
    border: none;
    border-radius: 12px;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    background: #f4f4f9; /* Subtle off-white background */
}

/* Hover effect */
.card:hover {
    transform: translateY(-10px);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.15);
}

.card-body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 20px;
    background-color: #ffffff; /* Clean white background */
}

.card-title {
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    color: #333; /* Darker font color */
}

.card-text {
    margin-bottom: 0.75rem;
    font-size: 1rem;
    color: #666; /* Subtle text color */
}

/* Button Styling */
.custom-btn-warning, .custom-btn-danger, .custom-btn-primary {
    padding: 10px 15px;
    font-size: 0.9rem;
    border-radius: 8px;
    transition: background-color 0.3s ease, transform 0.3s ease;
}

.custom-btn-warning {
    background-color: #f0ad4e;
    color: #fff;
    border: none;
}

.custom-btn-danger {
    background-color: #d9534f;
    color: #fff;
    border: none;
}

.custom-btn-primary {
    background-color: #5bc0de;
    color: #fff;
    border: none;
}

/* Hover effects for buttons */
.custom-btn-warning:hover, .custom-btn-danger:hover, .custom-btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.custom-btn-warning:hover {
    background-color: #ec971f;
}

.custom-btn-danger:hover {
    background-color: #c9302c;
}

.custom-btn-primary:hover {
    background-color: #31b0d5;
}

/* Adjust spacing between cards */
.card + .card {
    margin-top: 25px;
}
/* Image hover styling */
.img-fluid {
    transition: box-shadow 0.3s ease, opacity 0.3s ease; /* Smooth transition for hover effect */
}

.card:hover .img-fluid {
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Adds a shadow on hover */
    opacity: 0.9; /* Slightly dim the image on hover */
}


/*card design end */



    .btn {
        font-size: 0.875rem; /* Adjust button font size */
        padding: 0.5rem 1rem; /* Adjust button padding */
        border-radius: 5px;
    }

    .btn-warning {
        background-color: #ffc107;
        border-color: #ffc107;
    }

    .btn-warning:hover {
        background-color: #e0a800;
        border-color: #d39e00;
    }

    .btn-danger {
        background-color: #dc3545;
        border-color: #dc3545;
    }

    .btn-danger:hover {
        background-color: #c82333;
        border-color: #bd2130;
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
    }

    .btn-primary:hover {
        background-color: #0069d9;
        border-color: #0062cc;
    }

    .d-flex {
        display: flex;
    }

    .justify-content-center {
        justify-content: center;
    }

    .gap-2 {
        gap: 0.5rem;
    }

    .text-center {
        text-align: center;
    }

    .mt-3 {
        margin-top: 1rem;
    }

{#        logo#}

        .logo-right {
  width: 150px;
  height: auto;
  margin-left: 40px; /* Adjust the value as needed */

}


 /* Default style for the heart icon (not favorited) */
  .heart-icon {
    font-size: 24px;
    color: #ccc; /* Default color (gray) */
    cursor: pointer;
  }

  /* Style for the heart icon when favorited */
  .favorited {
    color: red !important; /* Favorited color (red) */
  }


        .logo-right {
  width: 150px;
  height: auto;
  margin-left: 5px; /* Adjust the value as needed */
}


        /* Styling the Select Box */
.form-select-lg {
    background-color: #f8f9fa;
    border: 2px solid #007bff;
    border-radius: 0.375rem;
    transition: all 0.3s ease;
    color: #495057;
}

.form-select-lg:hover, .form-select-lg:focus {
    background-color: #ffffff;
    border-color: #007bff;
    box-shadow: 0 4px 8px rgba(0, 123, 255, 0.2);
}

/* Search Input Styling */
.form-control-lg {
    border-radius: 0.375rem;
    transition: all 0.3s ease;
    border: 2px solid #007bff;
    padding: 10px;
}

.form-control-lg:hover, .form-control-lg:focus {
    border-color: #007bff;
    box-shadow: 0 4px 8px rgba(0, 123, 255, 0.2);
}

/* Search Button Styling */
.btn-info {
    background-color: #007bff;
    border-color: #007bff;
    color: #fff;
    transition: all 0.3s ease;
}

.btn-info:hover {
    background-color: #0056b3;
    border-color: #0056b3;
    transform: scale(1.05); /* Small animation on hover */
}

/* Optional small shadow for input-group */
.input-group {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}
        /*see more */
        .hidden-row {
            display: none;
        }

        /*css for search icon */
         /* Adjust the icon positioning */
    .search-icon {
        position: relative;
        top: 8px; /* Adjust this value to lower the icon */
    }

    /* Optional: Ensure the button doesn't look like a traditional button */
    .input-group-text {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px 15px; /* Adjust padding as needed */
    }

    /* Optional: Styling for the button border */
    .input-group-text.border-0 {
        border: none;
        background: transparent;
    }
 .heart-icon {
    font-size: 24px;
    color: #ccc; /* Default color (gray) */
    cursor: pointer;
}

.favorited {
    color: red !important; /* Filled red color */
}


</style>




  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Index - OnePage Bootstrap Template</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="../static/admin/assets/img/favicon.png" rel="icon">
  <link href="../static/admin/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../static/admin/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../static/admin/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../static/admin/assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../static/admin/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../static/admin/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Include Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">

    <!-- Include Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">





  <!-- Main CSS File -->
  <link href="../static/admin/assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: OnePage
  * Template URL: https://bootstrapmade.com/onepage-multipurpose-bootstrap-template/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="index-page">

  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">

      <a href="userhome" class="logo d-flex align-items-center me-auto">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <img src="../static/admin/assets/img/logo1.png" class="logo-right" alt=""  width= 150px; height= auto;>
{#        <h1 class="sitename">BookHive</h1>#}
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
{#          <li><a href="#hero" class="active">UserHome<br></a></li>#}
          <li><a href="#about">Catogories</a></li>
          <li><a href="/fav_view">Favorites</a></li>
          <li><a href="/sellerhome" class="logo d-flex align-items-center me-auto">Sell</a></li>
          <li><a href="/home_chat">Chats</a></li>
            <li><a href="#team">Profile</a></li>

        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

{#      <a class="btn-getstarted" href="#about">Get Started</a>#}

    </div>
  </header>

  <main class="main">
          <div class="form-container">
              <br/><br/><br/>
  <form id="form1" name="form1" method="post" action="userhomesearch">
    {% csrf_token %}
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="input-group">
                <!-- Filter Dropdown with Select -->
                <div class="input-group-prepend">
                    <select name="cat" class="form-select form-select-lg" aria-label="Category Select">
                        <option value="0">All</option>
                        {% for i in c %}
                            <option value="{{ i.id }}" {% if i.id == cat %} selected {% endif %}>{{ i.category }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Search Input -->
                <input type="text" id="name-search" name="s" value="{{ s }}" class="form-control form-control-lg" placeholder="Enter name to search" aria-label="Search">

                 <!-- Search Icon as a Button -->
                <div class="input-group-append">
                    <button type="submit" class="input-group-text border-0" id="search-addon">
                        <i class="fas fa-search search-icon"></i>
                    </button>
                </div>
                </div>
            </div>
        </div>
    </div>
</form>


</div>


<div/>
      <!-- Hero Section -->
<section id="hero" class="hero section">

  <img src="../static/admin/assets/img/hero-bg-abstract.jpg" alt="" data-aos="fade-in" class="" style="border-radius: 50%">

  <div class="container">

   {% if not s and not cat %}
<div class="row justify-content-center" data-aos="zoom-out">
    <div class="col-xl-7 col-lg-9 text-center" style="margin-bottom: 2rem;">
        <!-- Add a Heading -->
        <h1 class="display-4">Explore the Best of Pre-Loved Books</h1>
        <p class="lead">Find your next great read from our curated selection of gently used books. Whether you're a buyer or a seller, BookHive connects you with quality books at fantastic prices.</p>
    </div>
</div>
{% endif %}

{#    <div class="text-center" data-aos="zoom-out" data-aos-delay="100">#}
{#      <!-- Placeholder for additional button if needed -->#}
{#    </div>#}
 <!-- Results Message -->
{% if s or cat %}
    <div class="text-center mt-0">
        {% if val %}
            <h5 class="result-header fw-bold text-success">Search Results:</h5>
        {% else %}
            <h5 class="no-results fw-bold text-danger">No search results found.</h5>
        {% endif %}
    </div>
{% endif %}


<div class="row gy-4 mt-5">
  <!-- Book Card 1 -->
  {% for i in val %}
 <div class="col-md-6 col-lg-4 {% if forloop.counter > 6 %}hidden-row{% endif %}" data-aos="zoom-out" data-aos-delay="100">
    <div class="card h-100">
      <!-- Favorite Icon in the top-right corner -->
      <div class="position-absolute top-0 end-0 p-2">
          {% if i.s %}
               <i class="fas fa-heart heart-icon favorited" data-book-id="{{ i.id }}"></i>
          {% else %}
        <i class="fas fa-heart heart-icon" data-book-id="{{ i.id }}"></i>
          {% endif %}
      </div>

      <!-- Image Section -->
      <div class="text-center ">
      <img src="{{ i.photo.url }}" alt="{{ i.Tittle }}" class="img-fluid rounded-top" style="object-fit: cover; height: 200px; width: 75%">


      </div>

      <!-- Card Body -->
      <div class="card-body text-center" >
        <!-- Book Title -->
        <h5 class="card-title">{{ i.Tittle }}</h5>
        <!-- Author -->
        <p class="card-text"><strong>Author:</strong> {{ i.Author }}</p>
        <!-- Category -->
        <p class="card-text"><strong>Category:</strong> {{ i.category.category }}</p>
        <!-- Status -->
        <p class="card-text"><strong>Status of Book:</strong> {{ i.status }}</p><br/>
        <!-- Action Button -->
        <a href="/book_detail2/{{ i.id }}" class="btn btn-primary btn-sm custom-btn-primary">View Details</a>
      </div>
    </div>
  </div>
  <!-- End Book Card 1 -->
  {% endfor %}
</div>

<!-- See More and Show Less Buttons -->
        <div class="text-center mt-4">
            <button id="seeMoreBtn" class="btn btn-primary btn-sm custom-btn-primary" style="display: none;">See More</button>
            <button id="showLessBtn" class="btn btn-primary btn-sm custom-btn-primary" style="display: none;">Show Less</button>
        </div>

  </div>

</section><!-- /Hero Section -->



  </main>
<footer id="footer" class="footer light-background py-3">

    <div class="container copyright text-center mt-4">
        <p>© <span>2024</span> <strong class="px-1 sitename">BookHive</strong> <span>All Rights Reserved</span></p>
        <div class="credits">
            <!-- You can add custom links or messages here -->
            Designed by <a href="#">Your Team Name</a>
        </div>
    </div>

</footer>


  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

 <!-- Vendor JS Files -->
<script src="../static/admin/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../static/admin/assets/vendor/php-email-form/validate.js"></script>
<script src="../static/admin/assets/vendor/aos/aos.js"></script>
<script src="../static/admin/assets/vendor/purecounter/purecounter_vanilla.js"></script>
<script src="../static/admin/assets/vendor/glightbox/js/glightbox.min.js"></script>
<script src="../static/admin/assets/vendor/swiper/swiper-bundle.min.js"></script>
<script src="../static/admin/assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
<script src="../static/admin/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRxU6E3v5gZZr2VprF4/JpIBcLgrI4dJoTGp4PaF4" crossorigin="anonymous">

<!-- Bootstrap Bundle with Popper.js (for Dropdowns, Tooltips, Popovers) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-oFjtyTQ5dySRaePjnYYtptIliE9DRDYFJ4fI5bbK7hPZVbZfjlyTZvxcqFQynHgG" crossorigin="anonymous"></script>

<!-- Main JS File -->
<script src="../static/admin/assets/js/main.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Select all heart icons
    document.querySelectorAll('.heart-icon').forEach(function(icon) {
      // Add click event listener to each heart icon
      icon.addEventListener('click', function() {
        const bookId = this.getAttribute('data-book-id');
         $.ajax({
                type: "GET",
                url: "/addfav",
                data: { bid: bookId },
                success: function(data) {
                    if (data.is_taken) {
                        $('#email-message').text(data.error_message);
                        $('#targetButton').prop('disabled', true);
                    } else {
                        $('#email-message').text("");
                        $('#targetButton').prop('disabled', false);
                    }
                }
            });
        // Toggle the 'favorited' class
        this.classList.toggle('favorited');

        // Log the book ID to the console for now
        console.log('Book ID added to favorites:', bookId);

        // Future functionality for redirect or AJAX can go here
        // window.location.href = '/favorites'; // Example for future redirect
      });
    });

    // Ensure the select box has a nicer interaction by adding a focus event listener
    const selectBox = document.querySelector('select[name="cat"]');
    if (selectBox) {
      selectBox.addEventListener('focus', function() {
        this.style.boxShadow = '0 0 5px rgba(23, 162, 184, 0.5)';
      });

      selectBox.addEventListener('blur', function() {
        this.style.boxShadow = 'none';
      });
    }

    // See More and Show Less button functionality
    const seeMoreBtn = document.getElementById('seeMoreBtn');
    const showLessBtn = document.getElementById('showLessBtn');
    const hiddenRows = document.querySelectorAll('.hidden-row');
    let currentIndex = 0;

    // Check if buttons and hidden rows exist
    if (seeMoreBtn && showLessBtn && hiddenRows.length > 0) {
      seeMoreBtn.style.display = 'inline-block';

      seeMoreBtn.addEventListener('click', function () {
        for (let i = currentIndex; i < currentIndex + 6 && i < hiddenRows.length; i++) {
          hiddenRows[i].style.display = 'block';
        }
        currentIndex += 6;

        if (currentIndex >= hiddenRows.length) {
          seeMoreBtn.style.display = 'none';
        }
        showLessBtn.style.display = 'inline-block';
      });

      showLessBtn.addEventListener('click', function () {
        hiddenRows.forEach(function(row) {
          row.style.display = 'none';
        });
        currentIndex = 0;
        showLessBtn.style.display = 'none';
        seeMoreBtn.style.display = 'inline-block';
      });
    }
  });
</script>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script type="text/javascript">

        $("#email").keyup(function(){
            var email = $(this).val();

            $.ajax({
                type: "GET",
                url: "/checkemail",
                data: { email: email },
                success: function(data) {
                    if (data.is_taken) {
                        $('#email-message').text(data.error_message);
                        $('#targetButton').prop('disabled', true);
                    } else {
                        $('#email-message').text("");
                        $('#targetButton').prop('disabled', false);
                    }
                }
            });
        });



    </script>


</body>

</html>